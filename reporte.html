<!-- Reportes ciudadano -->
        <div data-role="page" id="reporte" data-title="Reporte ciudadano" data-dom-cache="true">
            <div data-role="header" data-position="fixed" data-theme="d">
                <a href="#home" data-icon="arrow-l" data-direction="reverse" data-transition="slide">Atrás</a>
                <h1>Reporte</h1>
            </div>
            <div data-role="content">
                <!-- Lista de reportes de la categoría -->
                <ul data-role="listview"  id="lista-reportes">
                    
                </ul>
            </div>
            
            <script>
                $('#reporte').on('pageinit', function(event){
                    var urlReporte = window.localStorage.getItem('ws_host')+window.localStorage.getItem('ws_ruta')+"insert_reporte";
                    var idPersona = window.localStorage.getItem('id_persona');
                    var idTipo = "";
                    $('#lista-reportes').on('click','li a', function(){
                        $.mobile.loading( 'show', {
                                text: 'Enviando reporte',
                                textVisible: true,
                                theme: 'z',
                                html: ""
                        });
                        idTipo = $(this).attr('id');
                        console.log($(this).attr('id'));
                        $.ajax({
                            url: urlReporte,
                            dataType: "jsonp",
                            crossDomain: "true",
                            data: { id_persona: idPersona, id_tipo: idTipo, mensaje: 'Reporte inicial' }
                        }).done(function( respuesta ) {
                            if( respuesta.mensaje === 'ok' ){
                                //alert("Reporte generado con id: "+respuesta.id);
                                window.localStorage.setItem("id_evento", respuesta.id_evento);
                                window.localStorage.setItem("telefono", respuesta.telefono);
                                $.mobile.loading('hide');
                                $.mobile.changePage('#media', {transition: 'slide'});
                            }else if( respuesta.validacion === 'error' ){
                                $.mobile.loading('hide');
                                alert( respuesta.mensaje );
                            }
                        }).fail(function (){
                            alert("Error al intentar conectar con el servidor.");
                            //$('#formulario input, #formulario button').removeAttr('disabled'); //deshabilita el formulario
                            //$('#ingresar i').removeClass().addClass('icon-signin'); //le agrega una animación al botón (loader)
                        });
                    });
                });
            </script>
        </div>